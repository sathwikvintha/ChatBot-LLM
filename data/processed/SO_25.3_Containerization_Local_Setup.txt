Local Setup Guide




1. Setup Podman and wsl-vpn-kit. 
   (Refer to “WSL and Podman Setup for Spingboot with OracleDB ENV.docx”)

2. Setup podman compose (Check the embedded document)

3. Get access to Artifact Repository
https://artifacthub-iad.oci.oraclecorp.com/ui/repos/tree/General/finergy-jpac-csc-bnpp
Refer to “Doc_for_artifacthb_access.docx” or (Check the embedded document)

4. Login to Artifact Repository with SSO credentials.

You can search “finergy-jpac-csc-bnpp” in search box for all the available images and paths.
5. Now we will be generating an Access Token, which will be used to pull & push images.
6. Click on profile dropdown and click on Edit Profile.

7. Click on “Generate an Identity Token”

8. Give an description to identify your token and click on Next.

Make sure to copy the token somewhere and save it as it will be required to login.

9. Open terminal.
10. Check if your podman machine is running or not by doing “wsl -l -v”.

11. If both podman machine and wsl-vpn-kit are stopped. Start podman machine by doing
“podman machine start”
    Once machine is successfully started, you can start wsl-vpn-kit by doing
“wsl.exe -d wsl-vpnkit --cd /app wsl-vpnkit”

Keep the window or tab open, DO NOT CLOSE IT or stop the process.
12. Open another terminal session by clicking on + icon or new window itself.
13. Now we will be login to artifact repo from terminal. (Make sure VPN is turned on)
14. Run “podman login finergy-jpac-csc-bnpp.dockerhub-iad.oci.oraclecorp.com”
15. Provide your SSO username (email) and click enter.

16. Provide the access token we copied for password and hit enter.

17. After successfully logged in. We are going to pull some images run these commands.
    - Maven Image
podman pull finergy-jpac-csc-bnpp.dockerhub-iad.oci.oraclecorp.com/base-images/maven3.9.1-jdk21.0.7:1.0.0
         - Oracle JDK Image
podman pull finergy-jpac-csc-bnpp.dockerhub-iad.oci.oraclecorp.com/base-images/container-registry.oracle.com/java/jdk:21.0.7
18. After this we will disconnect the Cisco VPN and pull these images.
    - Nginx
podman pull nginx:alpine
    - Node
podman pull node:18.17.1-alpine
    - Kong
podman pull kong:3.9
19. Clone SO 25.3 Repository.
20. Download the “SO_25.3_Containers_required_file_changes.zip” from 
SO_25.3_containerization_required_file_changes.zip
21. Extract the folder, copy the folder, and place it in your C:\ drive. and the contents of the folder will be like this.(Check the path how its shown.)


Now you have 2 options either containerize the applications and run them in podman or run them locally in STS or Eclipse. If you want to containerize the application then do not replace the files present under SO_25.3_containerization_required_file_changes/ source_code, else if you want to run those applications locally then replace the required files present under source_code.
Containerize Applications

1. Now we will be building all images. Open a Terminal.
2. Go to bnpp_csc_so/kongapi and run this command.
“podman build -t cscso-kong .”

3. Now we will build all the spring boot micro services images. (Make sure VPN is turned disconnected)
4. The below steps needs to be done for all the spring boot microservices.
- 4.1 Go to bnpp_csc_so/cscso-inbound-service
- 4.2 Build the image  -> “podman build -t cscso-inbound-service .”
Note :- The “ . ” at the end of build command is necessary as it represents the current directory where the Dockerfile is located.
5. Repeat the steps 4.1, 4.2 for all the spring boot services. 
	- cscso-login-service
	- cscso-outbound-service
	- cscso-reports-service
	- cscso-supplier-activation-service
	- cscso-program-onboarding-service
6. Now we will build angular service. Go to bnpp_csc_so/cscso-web/src/marketingapp 
    and run -> “podman build -t cscso-web .”
     It will take some time to build the angular image.
7. Run this command to remove all the dangling images (<none> type images).
“podman rmi -f $(podman images --filter "dangling=true" -q)”

8. Update the properties in docker-compose.yaml DB_URL, DB_USERNAME, DB_PASSWORD.
9. Connect to VPN again, Make sure wsl-vpn-kit is also running by doing wsl -l -v.
10. Go to bnpp_csc_so/docker-compose
11. Run “podman compose -p cscsoapp up”
12. It should start the services, if you open your podman desktop and go to containers section, you can see all services in green, which means they are running.
13. Once all applications are up and running without any errors.
14. Login to 25.3 ST. 
https://ofss-mum-4923.snbomprshared2.gbucdsint02bom.oraclevcn.com:7443/cscapp/#/cscapp/login

15. Open Network Tab and check the “preserve log” checkbox.

16. Now click on Supplier Onboarding Tab.

17. Check the Network Tab for index.jsp call, click on it and check under Headers

18. Copy the complete URL to notepad and replace the base URL which is IP and Port with “localhost:8443”
19 It will look like this 
https://localhost:8443/cscsoapp/index.jsp?USER_ID=SuperUserM&USER_AUTH_TOKEN=2YN7h_xFtKVEQKv35mN1Tr-&LAST_LOGIN_TIME=1756146600000&IS_GOBACK_ENABLED=Y&SESSION_TIME_OUT_INTRVL=900&USER_TYPE=BA&USER_LANG=EN&USER_TIME_ZONE_ID=HH
20. Use this URL to access the SO Containerized Application. (Note that the above steps are a shortcut to avoid setting up CSC_LOGIN APP and OLD_UX APP locally. 
21. Every time when you want to login follow steps 14-20.



Run Applications Locally In Eclipse IDE

To run the applications locally, make sure to replace the files provided in the required file changes under source_code folder. Those contains changes in application.properties for all services, jks files, access tokens and app.service.ts and app.module.ts file changes. 
1. Import all microservices in your local

2. Update the DB details and so access tokens paths in application.properties if required and do Maven Update Force with VPN turned off.
3. Do the step 2 for each microservice.
4. Go to bnpp_csc_so/cscso-web/src/marketingapp and open it in vs code.
5. Make sure VPN is disconnected, and do “npm i -f”
6. Now you can connect to VPN and start your frontend service as usual.
7. For backend Right Click > Run As > Spring Boot App
8. For frontend ng serve
9. Access it on http://localhost:4200


NOTE : Whenever you want to containerize the application locally and run it locally in podman, make sure you revert the required file changes you have done for backend and frontend services.
